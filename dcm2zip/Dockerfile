FROM openjdk:8-jre-slim-buster

WORKDIR /opt

RUN apt -y update && apt -y install wget zip
RUN wget https://bitbucket.org/xnatdcm/dicom-edit6/downloads/dicom-edit6-6.4.0-SNAPSHOT-jar-with-dependencies.jar && mv dicom-edit6-6.4.0-SNAPSHOT-jar-with-dependencies.jar dicomedit6.jar

LABEL org.nrg.commands="[{\"inputs\": [{\"command-line-flag\": \"-b\", \"name\": \"bids\", \"default-value\": false, \"false-value\": \"n\", \"required\": false, \"true-value\": \"y\", \"replacement-key\": \"[BIDS]\", \"type\": \"boolean\", \"description\": \"Create BIDS metadata file\"}, {\"replacement-key\": \"[OTHER_OPTIONS]\", \"required\": false, \"type\": \"string\", \"name\": \"other-options\", \"description\": \"Other command-line flags to pass to dcm2niix\"}], \"name\": \"dcm2niix\", \"command-line\": \"dcm2niix [BIDS] [OTHER_OPTIONS] -o /output /input\", \"outputs\": [{\"mount\": \"nifti-out\", \"required\": \"true\", \"name\": \"nifti\", \"description\": \"The nifti files\"}], \"image\": \"xnat/dcm2niix\", \"label\": \"dcm2niix\", \"version\": \"1.5\", \"schema-version\": \"1.0\", \"xnat\": [{\"derived-inputs\": [{\"name\": \"scan-dicoms\", \"matcher\": \"@.label == 'DICOM'\", \"provides-files-for-command-mount\": \"dicom-in\", \"derived-from-wrapper-input\": \"scan\", \"type\": \"Resource\", \"description\": \"The dicom resource on the scan\"}], \"contexts\": [\"xnat:imageScanData\"], \"description\": \"Run dcm2niix on a Scan\", \"label\": \"dcm2niix\", \"output-handlers\": [{\"accepts-command-output\": \"nifti\", \"label\": \"NIFTI\", \"type\": \"Resource\", \"name\": \"nifti-resource\", \"as-a-child-of-wrapper-input\": \"scan\"}], \"external-inputs\": [{\"matcher\": \"'DICOM' in @.resources[*].label\", \"required\": true, \"type\": \"Scan\", \"name\": \"scan\", \"description\": \"Input scan\"}], \"name\": \"dcm2niix-scan\"}], \"mounts\": [{\"writable\": \"false\", \"path\": \"/input\", \"name\": \"dicom-in\"}, {\"writable\": \"true\", \"path\": \"/output\", \"name\": \"nifti-out\"}], \"info-url\": \"https://github.com/rordenlab/dcm2niix\", \"type\": \"docker\", \"description\": \"Runs dcm2niix\"}]"
